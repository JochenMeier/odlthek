extends ../layout

block content

  div.modal.fade(id="delete-booking-modal")
    div.modal-dialog
      div.modal-content
        div.modal-header
          button(type="button", class="close", data-dismiss="modal")
          h3 Delete booking?
        div.modal-body
          p Are you sure you want to delete this booking?
        div.modal-footer
          a.btn.btn-danger Delete

  if(bookings && (bookings.open || bookings.handout || bookings.closed))
    .table-responsive
      table
        tr
          th Name
          th Device/ID
          th Start Reservation
          th End Reservation
          th
          th
          th

        if(bookings && bookings.open)
         tr.spacer
            th(colspan=7)
          tr.section
            th(colspan=7)
              | Upcoming bookings

          - each booking in bookings.open
            tr
              td
                =booking.username
                br
                span.small
                  =booking.user.email
              td
                a(href="/gadgets/" + booking.gadget)
                  =booking.gadgetname
              td
                =fmtDatetime(booking.start)
              td
                =fmtDatetime(booking.end)
                if (booking.expired)
                  span.text-danger
                    b (Expired)
              td.tools
                a(
                  href="/bookings/" + booking._id + "/edit",
                  data-toggle="modal",
                  data-target="#bookingModal"
                ).edit
              td.tools
                a(href="/bookings/"+booking._id+"/handout").handOut
              td.tools
                a(data-href="/bookings/" + booking._id + "/remove").cancel-booking.cancel


        if(bookings && bookings.handout)
          tr.spacer
            th(colspan=7)
          tr.section
            th(colspan=7)
              | Active bookings
          - each booking in bookings.handout
            tr
              td
                =booking.username
                br
                span.small
                  =booking.user.email
              td
                a(href="/gadgets/" + booking.gadget)
                  =booking.gadgetname
              td
                =fmtDatetime(booking.start)
              td
                =fmtDatetime(booking.end)
                if (booking.expired)
                  span.text-danger
                    b (Expired)
              td.tools
                a(
                  href="/bookings/" + booking._id + "/edit",
                  data-toggle="modal",
                  data-target="#bookingModal"
                ).edit
              td.tools
                a(href="/bookings/"+booking._id+"/takeback").takeBack
              td.tools
                a(data-href="/bookings/" + booking._id + "/remove").cancel-booking.cancel


        if(bookings && bookings.closed)
          tr.spacer
            th(colspan=7)
          tr.section
            th(colspan=7)
              | Closed bookings
          - each booking in bookings.closed
            tr
              td
                =booking.username
                br
                span.small
                  =booking.user.email
              td
                a(href="/gadgets/" + booking.gadget)
                  =booking.gadgetname
              td=fmtDatetime(booking.start)
              td=fmtDatetime(booking.end)
              td.tools
              td.tools
              td.tools
                a(data-href="/bookings/" + booking._id + "/remove").cancel-booking.cancel

  else
    | No bookings...