extends ../layout

block content

  div.modal.fade(id="delete-booking-modal")
    div.modal-dialog
      div.modal-content
        div.modal-header
          button(type="button", class="close", data-dismiss="modal") x
          h3 Delete booking?
        div.modal-body
          p Are you sure you want to delete this booking?
        div.modal-footer
          a.btn.btn-attention Delete

  #layerBookGadget
  #blank

  if(bookings && (bookings.open || bookings.handout || bookings.closed))
    table.bookingList
      tr.headline
        th Name
        th Device/ID
        th Start Reservation
        th End Reservation
        th
        th.last
      if(bookings && bookings.open)
        tr.section
          th(colspan=6)
            | Upcoming bookings
        - each booking in bookings.open
          tr
            td=booking.username
            td
              a(href="/gadgets/" + booking.gadget)
                =booking.gadgetname
            td=fmtDatetime(booking.start)
            td=fmtDatetime(booking.end)
            td.green
              a(href="/bookings/"+booking._id+"/handout").handOut
            td.green
              a(data-href="/bookings/" + booking._id + "/remove").cancel-booking.cancel

      if(bookings && bookings.handout)
        tr.spacer
          th(colspan=6)
        tr.section
          th(colspan=6)
            | Active bookings
        - each booking in bookings.handout
          tr
            td=booking.username
            td
              a(href="/gadgets/" + booking.gadget)
                =booking.gadgetname
            td=fmtDatetime(booking.start)
            td=fmtDatetime(booking.end)
            td.green
              a(href="/bookings/"+booking._id+"/takeback").takeBack
            td.green
              a(data-href="/bookings/" + booking._id + "/remove").cancel-booking.cancel

      if(bookings && bookings.closed)
        tr.spacer
          th(colspan=6)
        tr.section
          th(colspan=6)
            | Closed bookings
        - each booking in bookings.closed
          tr
            td=booking.username
            td
              a(href="/gadgets/" + booking.gadget)
                =booking.gadgetname
            td=fmtDatetime(booking.start)
            td=fmtDatetime(booking.end)
            td.green
              |closed
            td.green
              a(data-href="/bookings/" + booking._id + "/remove").cancel-booking.cancel

  else
    | No bookings...